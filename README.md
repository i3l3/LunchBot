# LunchBot
나이스 API를 통해 학교 급식 정보를 불러와 인스타그램에 게시합니다.

## `.env` 파일 작성법
> `API_KEY`
나이스 급식 API 키입니다. 나이스 API 포털에서 얻을 수 있습니다.

> `OFCDC_CODE`
교육청 코드입니다. 나이스 API 포털에서 얻을 수 있습니다.

> `SCHOOL_CODE`
학교 코드입니다. 나이스 API 포털에서 얻을 수 있습니다.

> `MEAL_CODE`
식사 종류를 나타내는 코드입니다. 조식: `1`, 중식: `2`, 석식: `3`

> `INSTAGRAM_USERNAME` & `INSTAGRAM_PASSWORD`
게시물을 업로드할 계정의 아이디와 비밀번호입니다.

> `BACKGROUND_URL` & `BOLD_FONT_URL` & `EXTRA_BOLD_FONT_URL`
게시물에 사용되는 에셋 파일들의 URL입니다. 비워두면 다운로드를 하지 않습니다.

## `assets` 폴더의 용도와 필요한 파일들
게시물에 업로드할 사진의 배경 사진을 저장하고, 만들어진 사진을 임시로 저장하는 용도입니다.

> `assets/background.png`
게시물의 배경에 들어가는 사진입니다. 정사각형 모양으로 잘려서 사용되는데, 추후 그 크기와 위치를 설정하는 기능을 넣을 계획입니다.

> `assets/Pretendard-Bold.otf` & `assets/Pretendard-ExtraBold.otf`
각각 본문, 제목에 사용되는 글꼴입니다.

## 실행법
```bash
pip install -r requirements.txt
python3 notice_daily.py
```
특정한 날 하루만 게시물 업로드가 필요하다면 `notice_daily`부분을 `notice_manually`로 변경해 실행하시면 됩니다.

## 알려진 문제
인스타그램은 현재 자동화 계정을 차단하고 있습니다.
이러한 문제를 해결하기 위해서 7시 00분부터 7시 10분 사이의 무작위의 시간에 게시물을 업로드를 하게 하였습니다.
또한 게시물을 업로드하는 계정으로 릴스 시청 등 자동화 활동으로 의심되지 않을 만한 행동을 주기적으로 해주셔야 합니다.

## TODO
- [ ] 이미지 잘리는 위치 변경 가능하게 하기 (`.env` 파일에 콘피그 추가)
- [ ] 게시물 업로드 시간 변경 가능하게 하기 (`.env` 파일에 콘피그 추가)
- [ ] 게시물 업로드 시간의 무작위 딜레이 범위 변경 가능하게 하기 (`.env` 파일에 콘피그  추가)
- [ ] 로그 기능 추가 (웹훅도?)